{"ast":null,"code":"\"use strict\";\n\nvar twoProduct = require(\"two-product\");\n\nvar robustSum = require(\"robust-sum\");\n\nvar robustScale = require(\"robust-scale\");\n\nvar compress = require(\"robust-compress\");\n\nvar NUM_EXPANDED = 6;\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length - 1);\n\n  for (var i = 1; i < m.length; ++i) {\n    var r = result[i - 1] = new Array(m.length - 1);\n\n    for (var j = 0, k = 0; j < m.length; ++j) {\n      if (j === c) {\n        continue;\n      }\n\n      r[k++] = m[i][j];\n    }\n  }\n\n  return result;\n}\n\nfunction matrix(n) {\n  var result = new Array(n);\n\n  for (var i = 0; i < n; ++i) {\n    result[i] = new Array(n);\n\n    for (var j = 0; j < n; ++j) {\n      result[i][j] = [\"m[\", i, \"][\", j, \"]\"].join(\"\");\n    }\n  }\n\n  return result;\n}\n\nfunction sign(n) {\n  if (n & 1) {\n    return \"-\";\n  }\n\n  return \"\";\n}\n\nfunction generateSum(expr) {\n  if (expr.length === 1) {\n    return expr[0];\n  } else if (expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\");\n  } else {\n    var m = expr.length >> 1;\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\");\n  }\n}\n\nfunction determinant(m) {\n  if (m.length === 2) {\n    return [\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\");\n  } else {\n    var expr = [];\n\n    for (var i = 0; i < m.length; ++i) {\n      expr.push([\"scale(\", determinant(cofactor(m, i)), \",\", sign(i), m[0][i], \")\"].join(\"\"));\n    }\n\n    return generateSum(expr);\n  }\n}\n\nfunction compileDeterminant(n) {\n  var proc = new Function(\"sum\", \"scale\", \"prod\", \"compress\", [\"function robustDeterminant\", n, \"(m){return compress(\", determinant(matrix(n)), \")};return robustDeterminant\", n].join(\"\"));\n  return proc(robustSum, robustScale, twoProduct, compress);\n}\n\nvar CACHE = [function robustDeterminant0() {\n  return [0];\n}, function robustDeterminant1(m) {\n  return [m[0][0]];\n}];\n\nfunction generateDispatch() {\n  while (CACHE.length < NUM_EXPANDED) {\n    CACHE.push(compileDeterminant(CACHE.length));\n  }\n\n  var procArgs = [];\n  var code = [\"function robustDeterminant(m){switch(m.length){\"];\n\n  for (var i = 0; i < NUM_EXPANDED; ++i) {\n    procArgs.push(\"det\" + i);\n    code.push(\"case \", i, \":return det\", i, \"(m);\");\n  }\n\n  code.push(\"}\\\nvar det=CACHE[m.length];\\\nif(!det)\\\ndet=CACHE[m.length]=gen(m.length);\\\nreturn det(m);\\\n}\\\nreturn robustDeterminant\");\n  procArgs.push(\"CACHE\", \"gen\", code.join(\"\"));\n  var proc = Function.apply(undefined, procArgs);\n  module.exports = proc.apply(undefined, CACHE.concat([CACHE, compileDeterminant]));\n\n  for (var i = 0; i < CACHE.length; ++i) {\n    module.exports[i] = CACHE[i];\n  }\n}\n\ngenerateDispatch();","map":{"version":3,"sources":["/Users/caseyrudick/Documents/landsharkrefactored-copy/client/node_modules/robust-determinant/robust-determinant.js"],"names":["twoProduct","require","robustSum","robustScale","compress","NUM_EXPANDED","cofactor","m","c","result","Array","length","i","r","j","k","matrix","n","join","sign","generateSum","expr","slice","determinant","push","compileDeterminant","proc","Function","CACHE","robustDeterminant0","robustDeterminant1","generateDispatch","procArgs","code","apply","undefined","module","exports","concat"],"mappings":"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","sourcesContent":["\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar compress = require(\"robust-compress\")\n\nvar NUM_EXPANDED = 6\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length-1)\n  for(var i=1; i<m.length; ++i) {\n    var r = result[i-1] = new Array(m.length-1)\n    for(var j=0,k=0; j<m.length; ++j) {\n      if(j === c) {\n        continue\n      }\n      r[k++] = m[i][j]\n    }\n  }\n  return result\n}\n\nfunction matrix(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = new Array(n)\n    for(var j=0; j<n; ++j) {\n      result[i][j] = [\"m[\", i, \"][\", j, \"]\"].join(\"\")\n    }\n  }\n  return result\n}\n\nfunction sign(n) {\n  if(n & 1) {\n    return \"-\"\n  }\n  return \"\"\n}\n\nfunction generateSum(expr) {\n  if(expr.length === 1) {\n    return expr[0]\n  } else if(expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\")\n  } else {\n    var m = expr.length>>1\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\")\n  }\n}\n\nfunction determinant(m) {\n  if(m.length === 2) {\n    return [\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\")\n  } else {\n    var expr = []\n    for(var i=0; i<m.length; ++i) {\n      expr.push([\"scale(\", determinant(cofactor(m, i)), \",\", sign(i), m[0][i], \")\"].join(\"\"))\n    }\n    return generateSum(expr)\n  }\n}\n\nfunction compileDeterminant(n) {\n  var proc = new Function(\"sum\", \"scale\", \"prod\", \"compress\", [\n    \"function robustDeterminant\",n, \"(m){return compress(\", \n      determinant(matrix(n)),\n    \")};return robustDeterminant\", n].join(\"\"))\n  return proc(robustSum, robustScale, twoProduct, compress)\n}\n\nvar CACHE = [\n  function robustDeterminant0() { return [0] },\n  function robustDeterminant1(m) { return [m[0][0]] }\n]\n\nfunction generateDispatch() {\n  while(CACHE.length < NUM_EXPANDED) {\n    CACHE.push(compileDeterminant(CACHE.length))\n  }\n  var procArgs = []\n  var code = [\"function robustDeterminant(m){switch(m.length){\"]\n  for(var i=0; i<NUM_EXPANDED; ++i) {\n    procArgs.push(\"det\" + i)\n    code.push(\"case \", i, \":return det\", i, \"(m);\")\n  }\n  code.push(\"}\\\nvar det=CACHE[m.length];\\\nif(!det)\\\ndet=CACHE[m.length]=gen(m.length);\\\nreturn det(m);\\\n}\\\nreturn robustDeterminant\")\n  procArgs.push(\"CACHE\", \"gen\", code.join(\"\"))\n  var proc = Function.apply(undefined, procArgs)\n  module.exports = proc.apply(undefined, CACHE.concat([CACHE, compileDeterminant]))\n  for(var i=0; i<CACHE.length; ++i) {\n    module.exports[i] = CACHE[i]\n  }\n}\n\ngenerateDispatch()"]},"metadata":{},"sourceType":"script"}