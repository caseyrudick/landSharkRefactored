{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar hoverLabelText = require('../../plots/cartesian/axes').hoverLabelText;\n\nvar opacity = require('../../components/color').opacity;\n\nvar hoverOnBars = require('../bar/hover').hoverOnBars;\n\nvar delta = require('../../constants/delta.js');\n\nvar DIRSYMBOL = {\n  increasing: delta.INCREASING.SYMBOL,\n  decreasing: delta.DECREASING.SYMBOL\n};\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode) {\n  var point = hoverOnBars(pointData, xval, yval, hovermode);\n  if (!point) return;\n  var cd = point.cd;\n  var trace = cd[0].trace;\n  var isHorizontal = trace.orientation === 'h';\n  var vAxis = isHorizontal ? pointData.xa : pointData.ya;\n\n  function formatNumber(a) {\n    return hoverLabelText(vAxis, a);\n  } // the closest data point\n\n\n  var index = point.index;\n  var di = cd[index];\n  var size = di.isSum ? di.b + di.s : di.rawS;\n\n  if (!di.isSum) {\n    point.initial = di.b + di.s - size;\n    point.delta = size;\n    point.final = point.initial + point.delta;\n    var v = formatNumber(Math.abs(point.delta));\n    point.deltaLabel = size < 0 ? '(' + v + ')' : v;\n    point.finalLabel = formatNumber(point.final);\n    point.initialLabel = formatNumber(point.initial);\n  }\n\n  var hoverinfo = di.hi || trace.hoverinfo;\n  var text = [];\n\n  if (hoverinfo && hoverinfo !== 'none' && hoverinfo !== 'skip') {\n    var isAll = hoverinfo === 'all';\n    var parts = hoverinfo.split('+');\n\n    var hasFlag = function (flag) {\n      return isAll || parts.indexOf(flag) !== -1;\n    };\n\n    if (!di.isSum) {\n      if (hasFlag('final') && (isHorizontal ? !hasFlag('x') : !hasFlag('y')) // don't display redundant info.\n      ) {\n          text.push(point.finalLabel);\n        }\n\n      if (hasFlag('delta')) {\n        if (size < 0) {\n          text.push(point.deltaLabel + ' ' + DIRSYMBOL.decreasing);\n        } else {\n          text.push(point.deltaLabel + ' ' + DIRSYMBOL.increasing);\n        }\n      }\n\n      if (hasFlag('initial')) {\n        text.push('Initial: ' + point.initialLabel);\n      }\n    }\n  }\n\n  if (text.length) point.extraText = text.join('<br>');\n  point.color = getTraceColor(trace, di);\n  return [point];\n};\n\nfunction getTraceColor(trace, di) {\n  var cont = trace[di.dir].marker;\n  var mc = cont.color;\n  var mlc = cont.line.color;\n  var mlw = cont.line.width;\n  if (opacity(mc)) return mc;else if (opacity(mlc) && mlw) return mlc;\n}","map":{"version":3,"sources":["/Users/caseyrudick/Documents/landsharkrefactored-copy/client/node_modules/plotly.js/src/traces/waterfall/hover.js"],"names":["hoverLabelText","require","opacity","hoverOnBars","delta","DIRSYMBOL","increasing","INCREASING","SYMBOL","decreasing","DECREASING","module","exports","hoverPoints","pointData","xval","yval","hovermode","point","cd","trace","isHorizontal","orientation","vAxis","xa","ya","formatNumber","a","index","di","size","isSum","b","s","rawS","initial","final","v","Math","abs","deltaLabel","finalLabel","initialLabel","hoverinfo","hi","text","isAll","parts","split","hasFlag","flag","indexOf","push","length","extraText","join","color","getTraceColor","cont","dir","marker","mc","mlc","line","mlw","width"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar hoverLabelText = require('../../plots/cartesian/axes').hoverLabelText;\nvar opacity = require('../../components/color').opacity;\nvar hoverOnBars = require('../bar/hover').hoverOnBars;\nvar delta = require('../../constants/delta.js');\n\nvar DIRSYMBOL = {\n    increasing: delta.INCREASING.SYMBOL,\n    decreasing: delta.DECREASING.SYMBOL\n};\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode) {\n    var point = hoverOnBars(pointData, xval, yval, hovermode);\n    if(!point) return;\n\n    var cd = point.cd;\n    var trace = cd[0].trace;\n    var isHorizontal = (trace.orientation === 'h');\n\n    var vAxis = isHorizontal ? pointData.xa : pointData.ya;\n\n    function formatNumber(a) {\n        return hoverLabelText(vAxis, a);\n    }\n\n    // the closest data point\n    var index = point.index;\n    var di = cd[index];\n\n    var size = (di.isSum) ? di.b + di.s : di.rawS;\n\n    if(!di.isSum) {\n        point.initial = di.b + di.s - size;\n        point.delta = size;\n        point.final = point.initial + point.delta;\n\n        var v = formatNumber(Math.abs(point.delta));\n        point.deltaLabel = size < 0 ? '(' + v + ')' : v;\n        point.finalLabel = formatNumber(point.final);\n        point.initialLabel = formatNumber(point.initial);\n    }\n\n    var hoverinfo = di.hi || trace.hoverinfo;\n    var text = [];\n    if(hoverinfo && hoverinfo !== 'none' && hoverinfo !== 'skip') {\n        var isAll = (hoverinfo === 'all');\n        var parts = hoverinfo.split('+');\n\n        var hasFlag = function(flag) { return isAll || parts.indexOf(flag) !== -1; };\n\n        if(!di.isSum) {\n            if(hasFlag('final') &&\n                (isHorizontal ? !hasFlag('x') : !hasFlag('y')) // don't display redundant info.\n            ) {\n                text.push(point.finalLabel);\n            }\n            if(hasFlag('delta')) {\n                if(size < 0) {\n                    text.push(point.deltaLabel + ' ' + DIRSYMBOL.decreasing);\n                } else {\n                    text.push(point.deltaLabel + ' ' + DIRSYMBOL.increasing);\n                }\n            }\n            if(hasFlag('initial')) {\n                text.push('Initial: ' + point.initialLabel);\n            }\n        }\n    }\n\n    if(text.length) point.extraText = text.join('<br>');\n\n    point.color = getTraceColor(trace, di);\n\n    return [point];\n};\n\nfunction getTraceColor(trace, di) {\n    var cont = trace[di.dir].marker;\n    var mc = cont.color;\n    var mlc = cont.line.color;\n    var mlw = cont.line.width;\n    if(opacity(mc)) return mc;\n    else if(opacity(mlc) && mlw) return mlc;\n}\n"]},"metadata":{},"sourceType":"script"}